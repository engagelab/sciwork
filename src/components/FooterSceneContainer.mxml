<?xml version="1.0" encoding="utf-8"?>
<s:HGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx">
	
	<fx:Script>
		<![CDATA[
			import listeners.SceneChangeEvent;
			
			import mx.collections.ArrayCollection;
			
			import spark.components.CheckBox;
			
			
			private var _currentScene:Object;
			
			/**
			 *
			 * Method to initialise the footer scene object.
			 * 
			 **/
			public function initScene(scene:Object):void {
				//assign the scene object some metadata
				_currentScene = scene;
				sceneId = _currentScene.sceneId;
				
				var cb:FooterTask;
				//for each tasks found in the scene, display them as a "finished" or "unfinished" checkbox
				for each (var task:Object in scene.tasks as ArrayCollection) {
					cb = new FooterTask();
					sceneGroup.addElement(cb);
					cb.enabled = !task.taskCompleted as Boolean;
					cb.scaleX = 1.3;
					cb.scaleY = 1.3;
					
					if(cb.enabled) {
						cb.buttonMode = true;
						//cb.addEventListener(MouseEvent.CLICK, handleTaskClick);
					}
				}
				
			}
			
			/**
			 *
			 * Event handling for click on checkboxes
			 * 
			 **/
			protected function handleTaskClick(evt:MouseEvent):void {
				
			}
			
			/**
			 *
			 * Event handling for click on scene button
			 * 
			 **/
			protected function handleSceneClick(event:MouseEvent):void {
				var sce:SceneChangeEvent = new SceneChangeEvent(resourceManager.getString('resources', 'SCENE_CHANGED'), true);
				sce.scene = this._currentScene;
				sce.eventOrigin = SceneChangeEvent.FOOTER;
				sce.sceneIndex = sceneIndex;
				dispatchEvent(sce);
			}
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<fx:String id="sceneId" />
		<fx:Number id="sceneIndex" />
	</fx:Declarations>
	
	<s:states>
		<s:State name="default" />
		<s:State name="selected" />
	</s:states>
	
	<s:HGroup id="sceneGroup" verticalAlign="bottom" gap="0">
		<s:Button id="scene" width="30" height="30" enabled.selected="false" click="handleSceneClick(event)" enabled.default="true" skinClass="skins.footerSceneButtonSkin" buttonMode.selected="false" buttonMode.default="true" />
		<s:Spacer width="5" />
	</s:HGroup>
</s:HGroup>
